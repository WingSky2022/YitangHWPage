# 作业系统优化版配置指南

本系统已实现 **Notion 风格 UI**、**实时 Markdown 键入转换** 及 **深色模式**。

## 1. 更新概要
> 作业填写页面：@index.html （双击文件查看）
> 作业完成展示页面：@homework_done.html （双击文件查看）
> 效果展示：https://yitanghwshow.lucasicloud.top/

1. 界面展示优化；
2. 右上角新增白天/黑夜模式按钮；
3. 暂存按钮迁移到右上角（填写作业界面）；
4. 输入框新增markdown格式渲染支持（填写作业界面）；
5. 输入框图片支持缩放（填写作业界面）；
6. 手机界面适配。

## 2. 部署说明

- @PRD\API接口说明.md 后端对接、生产环境部署。

- 作业完成页面 @homework_done.html 分享生成的图片中：缺少学员勋章和介绍字段，需要一堂这边再补充一下对应接口。

## 3. 颜色配置 (theme-config.json)

您可以直接修改 `theme-config.json` 来调整视觉风格：

| 键名            | 说明                                                       |
| :-------------- | :--------------------------------------------------------- |
| `primary`       | 品牌主色（亮色模式默认为黄色，深色模式建议改为蓝色或亮色） |
| `bgMain`        | 页面背景色                                                 |
| `bgCard`        | 卡片/编辑器背景色                                          |
| `textMain`      | 主要文字颜色                                               |
| `textSecondary` | 次要/辅助文字颜色                                          |
| `borderColor`   | 边框与分割线颜色                                           |

## 4. Markdown 配置 (markdown-config.js)

`markdown-config.js` 提供了对编辑器渲染规则的细粒度控制：

- **视觉规范 (`visualStyles`)**: 调整渲染后的行高、段落间距及各级标题的上边距。
- **语法触发 (`blockPatterns`)**: 定义触发块级转换（标题、列表、引用）的正则表达式模式及对应的命令。
- **行内样式 (`inlinePatterns`)**: 配置加粗 (**)、斜体 (*) 等语法规则的即时解析。

## 5. 核心功能优化 (New Features)

本次迭代针对作业填写与提交体验进行了模块化升级：

### 🧩 顶部导航与信息区
- **Tab 分页设计**: 
  - **作业规则**: 集成"点击复制链接"功能，方便 PC 端快速打开。
  - **历史作业**: 支持查看历史提交时间、得分及详情入口。
  - **提示**: 防丢失机制提醒。
- **导航栏优化**: "暂存"按钮移至顶部右侧，新增"深色模式"切换开关，支持头部常驻。

### 📝 沉浸式编辑器
- **图片智能缩放**: 插入图片后支持点击选中，通过拖拽四个角自由调整大小。
- **全屏专注模式**: 工具栏增加全屏按钮，提供无干扰写作环境。
- **排版优化**: 作业题目与回答区域分开，题目左对齐展示，工具栏功能更丰富（H1-H3、高亮、列表等）。
- **Markdown 即时渲染**: 支持 `# 标题`、`*列表*`、`**加粗**` 等快捷语法输入。

### 📤 提交与反馈流

- **结果展示**: 完成页包含得分展示、"优秀作业"盖章、班主任个性化点评。
- **互动组件**: 优化的课程满意度滑块与打分组件。

## 6. 文件结构与环境说明

### 文件用途
- **`PRD/`**: 包含原始设计文档、API 接口说明及需求规划。
- **`markdown-config.js`**: Markdown 渲染引擎的核心配置，定义了触发正则、视觉间距与渲染样式。
- **`index.html` (核心入口)**:
  - **用途**: 本地开发与生产部署的核心文件。
  - **技术栈**: 原生 HTML/CSS/JS (Vanilla JS)。
  - **依赖**: 仅依赖 `marked.js` (Markdown 解析) 和 `iconfont` (图标)。
  - **特点**: 逻辑已剥离为 `script.js` 和 `index.css`，数据为静态 Mock 数据。
- **`homework_done.html`**:
  - **用途**: 作业提交后的结果展示页与分享功能页。
  - **依赖**: 依赖 `share-generator.js`, `script.js`。
- **`_legacy_backup/`**:
  - **用途**: 存放归档的旧版源代码 (React/Vite 相关) ，仅作备份。

## 7. 开发说明
核心逻辑位于 `script.js` (从 `index.tsx` 转译而来的原生 JS)，它实现了：
1. **Markdown 解析**: 监听输入并实时转换。
2. **主题切换**: 动态修改 CSS 变量。
3. **UI 交互**: Tab 切换、评分组件等。

> **⚠️ 部署注意**：详细的 API 接口定义、后端对接方式及环境适配（如微信环境）说明，请查阅 `PRD/API接口说明.md`。

